version: "3.8"
services:
  front:
    image: lorena612/front:v1
    ports:
      - "5000:5000"
    networks:
      - frontn
    depends_on:
      - initdb
    environment:
      - DB_HOST=database-1.c9yjy3nmd8az.us-east-1.rds.amazonaws.com
      - DB_USER=proyectocoandco
      - DB_PASSWORD=hola1234
      - DB_NAME=coandco
      
  initdb:
    image: lorena612/basededatos:v1
    command: ["sh", "-c", "apk add --no-cache mysql-client && mysql -h database-1.c9yjy3nmd8az.us-east-1.rds.amazonaws.com -u proyectocoandco -phola1234 < /docker-entrypoint-initdb.d/co-co.sql"]
    networks:
      - frontn

networks:
  frontn:

